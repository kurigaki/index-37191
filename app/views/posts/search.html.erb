<%= render "shared/header" %>
<h3>検索ページ</h3>
<h3><%= link_to 'トップページへ戻る', root_path%></h3>
<div class='item-contents' id="detailed-search-result-wrapper">
  <%= search_form_for @q, url: search_posts_path, html: {id: "detailed-search-form"} do |f| %>
    <div class="search-field">
      <%= f.label :title, '商品名' %>
      <br>
      <%= f.text_field :title, placeholder: '商品名', value: params[:q]&.dig(:title)  %>
    </div>
    <div class="search-field">
      <%= f.label :user_name_cont, '出品者名' %>
      <br>
      <%= f.text_field :user_name_cont, placeholder: '出品者名' %>
    </div>
    <div class="search-field">
      <%= f.label :genre_id_in, 'カテゴリ' %>
      <br>
      <%= f.collection_check_boxes(:genre_id_in, Genre.all, :id, :name, {include_blank: "---"}) %>
    </div>
    <%= f.submit '検索' %>
  <% end %>
    <ul class='item-lists' id="detailed-search-result">
    <% @posts.each do |post| %>
      <li class='list'>
        <div class="posted-content">
          <p><%= post.title %></p>
          <p><%= post.text %></p>
          <p><%= image_tag post.image if post.image.present? %></p>
          <p><%= link_to '詳細', post_path(post.id)%></p>
        </div>
      </li>
    <% end %>
  </ul>
</div>